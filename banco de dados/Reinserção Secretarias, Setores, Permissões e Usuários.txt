drop table computador, historicocomputador, setor, secretaria, usuario, permissoes;

CREATE TABLE secretaria(
    idsecretaria BIGINT AUTO_INCREMENT,
    nomesecretaria VARCHAR(71) NOT NULL,
    siglasecretaria VARCHAR(10) NOT NULL,
    UNIQUE KEY(nomesecretaria),
    UNIQUE KEY(siglasecretaria),
    PRIMARY KEY(idsecretaria)
);

CREATE TABLE setor(
    idsetor BIGINT AUTO_INCREMENT,
    nomesetor VARCHAR(29) NOT NULL,
    idsecretaria BIGINT NOT NULL,
    PRIMARY KEY(idsetor),
    FOREIGN KEY(idsecretaria) REFERENCES secretaria(idsecretaria) ON UPDATE CASCADE ON DELETE CASCADE
);

CREATE TABLE permissoes(
    idpermissoes BIGINT AUTO_INCREMENT,
    cadastrarcomputador TINYINT,
    consultarcomputador TINYINT,
    editarcomputador TINYINT,
    excluircomputador TINYINT,
    cadastrarsecretaria TINYINT,
    consultarsecretaria TINYINT,
    editarsecretaria TINYINT,
    excluirsecretaria TINYINT,
    cadastrarsetor TINYINT,
    consultarsetor TINYINT,
    editarsetor TINYINT,
    excluirsetor TINYINT,
    cadastrarusuario TINYINT,
    consultarusuario TINYINT,
    editarusuario TINYINT,
    excluirusuario TINYINT,
    editarpermissoes TINYINT,
    realizarmanutencao TINYINT,
    PRIMARY KEY(idpermissoes)
);

CREATE TABLE usuario(
    idusuario BIGINT AUTO_INCREMENT,
    nomeusuario VARCHAR(40) NOT NULL,
    loginusuario VARCHAR(20) NOT NULL,
    senhausuario VARCHAR(128) NOT NULL,
    statususuario TINYINT NOT NULL,
    idpermissoes BIGINT NOT NULL,
    UNIQUE KEY(nomeusuario),
    UNIQUE KEY(loginusuario),
    PRIMARY KEY(idusuario),
    FOREIGN KEY(idpermissoes) REFERENCES permissoes(idpermissoes) ON DELETE CASCADE
);

CREATE TABLE historicocomputador(
    idhistoricocomputador BIGINT AUTO_INCREMENT,
    dataentrada DATE NOT NULL,
    horaentrada TIME NOT NULL,
    dataconclusao DATE,
    horaconclusao TIME,
    limpeza TINYINT,
    backup TINYINT,
    reparacaoso TINYINT,
    instalacaoso TINYINT,
    substituicaohd TINYINT,
    driverpack TINYINT,
    trocadefonte TINYINT,
    libreoffice TINYINT,
    antivirus TINYINT,
    navegadores TINYINT,
    java TINYINT,
    adobereader TINYINT,
    winrarflash TINYINT,
    conversorespdf TINYINT,
    firewallcentralseg TINYINT,
    usuarios TINYINT,
    dominio TINYINT,
    ultravnc TINYINT,
    ativacaowindows TINYINT,
    icones TINYINT,
    historicocomputador TEXT,
    PRIMARY KEY(idhistoricocomputador)
);

CREATE TABLE computador(
    idcomputador BIGINT AUTO_INCREMENT,
    nomecomputador VARCHAR(20) NOT NULL,
    statuscomputador VARCHAR(21) NOT NULL,
    memorandocomputador VARCHAR(9),
    contato VARCHAR(40),
    telefone VARCHAR(14),
    descricaocomputador TEXT NOT NULL,
    idhistoricocomputador BIGINT NOT NULL,
    idtecnico BIGINT NOT NULL,
    idsecretaria BIGINT NOT NULL,
    idsetor BIGINT NOT NULL,
    UNIQUE KEY(nomecomputador),
    PRIMARY KEY(idcomputador),
    FOREIGN KEY(idhistoricocomputador) REFERENCES historicocomputador(idhistoricocomputador) ON DELETE CASCADE,
    FOREIGN KEY(idtecnico) REFERENCES usuario(idusuario) ON UPDATE CASCADE,
    FOREIGN KEY(idsecretaria) REFERENCES secretaria(idsecretaria) ON DELETE CASCADE,
    FOREIGN KEY(idsetor) REFERENCES setor(idsetor) ON DELETE CASCADE
);

INSERT INTO `secretaria` (`idsecretaria`, `nomesecretaria`, `siglasecretaria`) VALUES
(1, 'Secretaria Municipal de Administração', 'SMAD'),
(2, 'Secretaria Municipal de Agricultura e Abastecimento', 'SMAA'),
(3, 'Secretaria Municipal de Assuntos de Segurança Pública', 'SMASP'),
(4, 'Secretaria Municipal de Desenvolvimento Econômico e Turismo', 'SMDET'),
(5, 'Secretaria Municipal de Desenvolvimento Urbano', 'SMDUR'),
(6, 'Secretaria Municipal da Educação', 'SMED'),
(7, 'Secretaria Municipal de Esporte e Lazer', 'SMEL'),
(8, 'Secretaria Municipal da Fazenda', 'SMF'),
(9, 'Secretaria Municipal da Família, Cidadânia e Assistência Social', 'SMFCAS'),
(10, 'Secretaria Municipal de Governança Comunitária', 'SGCOM'),
(11, 'Secretaria Geral de Governo', 'SGG'),
(12, 'Secretaria Municipal de Mobilidade Urbana', 'SEMURB'),
(13, 'Secretaria Municipal de Obras Públicas', 'SMOP'),
(14, 'Secretaria Municipal de Planejamento Estratégico e Captação de Recursos', 'SEPLAECR'),
(15, 'Procuradoria Geral do Município', 'PGM'),
(16, 'Secretaria de Planejamento Orçamentário', 'SEPROR'),
(17, 'Secretaria Municipal de Saúde', 'SMS'),
(18, 'Secretaria Municipal de Serviços Urbanos', 'SMSU'),
(19, 'Secretaria Municipal de Trabalho, Emprego e Renda', 'SMTER'),
(20, 'Gabinete do Prefeito', 'GP');

INSERT INTO `setor` (`idsetor`, `nomesetor`, `idsecretaria`) VALUES
(1, 'EPTI', 16),
(2, 'CTOF', 16),
(3, 'GABINETE', 16),
(4, 'RECURSOS HUMANOS', 1),
(5, 'DEPARTAMENTO PESSOAL', 1),
(7, 'PROTOCOLO', 1),
(8, 'VALE TRANSPORTE', 1),
(9, 'SESMT', 1),
(10, 'GABINETE', 1),
(11, 'VIEMSA', 17),
(12, 'GABINETE', 9),
(13, 'CAPSI', 17),
(14, 'USF SÃO MARCOS', 17),
(15, 'COMPRAS', 1),
(17, 'USF ARISTIDES D ÁVILA', 17),
(18, 'GABINETE', 3),
(19, 'ADMINISTRATIVO', 3),
(20, 'GGIM', 3),
(21, 'PROGRAMAS E PROJETOS', 6),
(22, 'ALIMENTAÇÃO ESCOLAR', 6),
(23, 'CEO', 17),
(24, 'SERVIÇO SOCIAL', 6),
(25, 'ADMINISTRATIVO', 12),
(26, 'PROCON', 20),
(27, 'JUNTA MILITAR', 20),
(28, 'CONTABILIDADE', 8),
(29, 'UBS VILA ALIANÇA', 17),
(30, 'TRABALHISTA', 15),
(31, 'VIEMSA DENGUE', 17),
(32, 'GABINETE', 20),
(35, 'BANCO DE ALIMENTOS', 9),
(36, 'EMEI NOSSA SENHORA DOS ANJOS', 6),
(37, 'FARMACIA MUNICIPAL', 17),
(38, 'ARRECADAÇÃO', 8),
(39, 'CRAS SÃO JUDAS', 9),
(41, 'GABINETE', 7),
(42, 'CENTRAL DE VEÍCULOS', 1),
(43, 'FISCALIZAÇÃO', 8),
(44, 'ALMOXARIFADO', 1),
(45, 'GABINETE', 13),
(46, 'DCS', 11),
(47, 'DAF', 1),
(48, 'SUE', 17),
(49, 'PROTOCOLO SEDE', 20),
(50, 'EXPEDIENTE', 17),
(51, 'IPTU', 8),
(53, 'DRH', 6),
(54, 'PAD', 15),
(55, 'USF PARQUE DOS ANJOS', 17),
(56, 'MENINOS E MENINAS', 9),
(57, 'CRAS BARNABÉ', 9),
(58, 'ADMINISTRATIVO', 13),
(59, 'TRANSPORTE ESCOLAR', 6),
(60, 'DEFESA CIVIL', 13),
(61, 'IMPLANTAÇÃO', 12),
(62, 'DPPJ', 18),
(63, 'SAMU', 17),
(64, 'APPM', 10),
(65, 'MARCAÇÃO DE CONSULTAS', 17),
(66, 'CONTABILIDADE', 15),
(67, 'ADMINISTRATIVO FINANCEIRO', 6),
(68, 'MANUTENÇÃO', 6),
(69, 'COHAB A', 17),
(70, 'RECURSOS HUMANOS', 17),
(71, 'AGRUPAMENTO AMBIENTAL', 3),
(72, 'DMLU', 18),
(73, 'DAF', 6),
(74, 'SAE', 17),
(75, 'EXECUTIVO FISCAL', 15),
(76, 'TESOURARIA', 8),
(77, 'EDUCAÇÃO PARA TRÂNSITO', 12),
(78, 'UBS PARQUE DOS ANJOS', 17),
(79, 'CRAS CENTRO', 9),
(80, 'UBS VERA CRUZ', 17),
(81, 'ADMINISTRATIVO', 5),
(82, 'ADMINISTRATIVO', 14),
(83, 'GABINETE', 14),
(84, 'FINANCEIRO', 9),
(85, 'PROTEÇÃO BÁSICA', 9),
(86, 'CDG', 20),
(87, 'DP', 17),
(88, 'RH', 17),
(89, 'MANUTENÇÃO', 17),
(90, 'JURÍDICO', 17),
(91, 'RECEPÇÃO', 15),
(92, 'GABINETE', 8),
(93, 'DEU', 5),
(94, 'NUTRIÇÃO', 9),
(95, 'SECOPLAN', 5),
(96, 'EMEI RAIO DE SOL', 6),
(97, 'SGCOM', 10),
(98, 'PROTEÇÃO ESPECIAL', 9),
(99, 'RECEPÇÃO', 1),
(100, 'POLICLINICA', 17),
(101, 'CONSELHO MUN', 10),
(102, 'USF MORUNGAVA', 17),
(103, 'GABINETE', 2),
(104, 'EDUCAÇÃO ESPECIAL', 6),
(105, 'UBS ÉRICO VERÍSSIMO', 17),
(106, 'GABINETE', 10),
(107, 'CASA DO IDOSO', 17),
(108, 'PAM VINTE QUATRO HORAS', 17),
(109, 'EMEI MUNDO ZACARIAS', 6),
(110, 'ATOS OFICIAIS', 11),
(111, 'UBS CENTRO', 17),
(112, 'GABINETE', 5),
(113, 'CENQ', 17),
(114, 'BEBÊ SAÚDE', 17),
(115, 'USF GRANVILLE', 17),
(116, 'CREAS', 9),
(117, 'APOIO INSTITUCIONAL', 6),
(118, 'PEDAGÓGICO', 6),
(119, 'ADMINISTRATIVO', 9),
(120, 'RECEPÇÃO', 7),
(121, 'ILUMINAÇÃO', 18),
(122, 'COORDENADORIA', 18),
(123, 'GABINETE', 18),
(124, 'GABINETE', 12),
(125, 'ALMOXARIFADO', 17),
(126, 'PROTOCOLO LESTE', 1),
(127, 'PROTOCOLO SEDE', 1),
(128, 'TRANSPORTE', 12),
(130, 'CMEG', 6),
(131, 'UBS SÃO GERALDO', 17),
(132, 'CÍVEL', 15),
(133, 'MPTCE', 15),
(134, 'DLAEF', 4),
(135, 'GABINETE', 6),
(136, 'JURÍDICO', 6),
(137, 'EDUCAR WEB', 6),
(138, 'ISSQN', 8),
(139, 'EMEI BEM ME QUER', 6),
(140, 'GABINETE', 17),
(141, 'ATENDIMENTO', 8);

INSERT INTO `permissoes` (`idpermissoes`, `cadastrarcomputador`, `consultarcomputador`, 
`editarcomputador`, `excluircomputador`, `cadastrarsecretaria`, `consultarsecretaria`, 
`editarsecretaria`, `excluirsecretaria`, `cadastrarsetor`, `consultarsetor`, `editarsetor`, 
`excluirsetor`, `cadastrarusuario`, `consultarusuario`, `editarusuario`, `excluirusuario`, 
`editarpermissoes`, `realizarmanutencao`) VALUES
(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0);

INSERT INTO `usuario` (`idusuario`, `nomeusuario`, `loginusuario`, `senhausuario`, `statususuario`, `idpermissoes`) VALUES
(1, 'Maikel Maciel Rönnau', 'maikel.ronnau', 'AEB14F0294EAEAD8A2F790A30D60B12806C24901039511DD1D4B54E1A86EFF71779780EF5FBECA94ECBA3C63CD8EFBD2A813C13243AC2708A8A98985F341405C', 1, 1);